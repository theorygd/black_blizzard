<!-- DOCTYPE Markdown -->

# DEMAND

对NoCode的需求列表：**暴风雪山庄**的程序编写

<!-- 暴风雪山庄计划 part 1 -->

- ### 暴风雪山庄

**暴风雪山庄**是一部以推理为基础的桌面角色扮演游戏(TRPG)，故事发生的背景被设定为一个突然遭遇暴风雪的度假山庄，每名玩家将操作不同的角色在地点或场合间移动，度过三四个日夜以等待救援的来到；

始料未及之事在于，患难朋友内潜伏着一名由导演指定的凶手——他渴望制造一起命案并完美地伪装自己，以尝试误导大家处决一名的善良受困者而取得胜利；游戏的具体规则和操作流程在文档`暴风雪山庄.docx`中被完整讲述。

由于较为人数众多时能力极为复杂导致容易漏算，而且人工处理时间过长严重影响各位玩家的游戏体验，设法创造一个能够完美执行规则和模拟游戏的程序，来辅助导演对于各个信息的获得和行动的判别将是很有必要的。

- ### 名字竞技场

**名字竞技场**是一款纪念**MD5大作战**发布十周年的纪念作品。该游戏继承了**基于名字完全决定属性值**的思路：计算名字字符串的RC4(前作为MD5)密文，之后按一定规则组合各个位(相当于多个随机数据)，得到攻、防、速、敏、魔、抗、智、HP共8个主属性以及火球术、分身等共35个技能的熟练度。

RC4密文拥有均匀的分布，属性的计算过程将其转为正态分布；而如果要找到两个名字的属性全同，它们必定是一对RC4冲突；具体战斗的过程涉及到一个额外的种子，在其上应用随机发生器，判定战斗内各种概率技能或伤害的发生；重复该种子的输出将完全相同，但更改种子会产生相异的战斗流程以及胜负结果，可用于两队对战多次消除偶然因素。

游戏发布页的源码在[仓库](https://github.com/namerena/namerena.github.io)中给出，其中JavaScript源码`md5.js`是由Dart语言转译而来，但因为使用了代码长度压缩优化而难以解读；所幸其Dart源码也已开源，全部内容在[仓库](https://github.com/namerena/src)中给出，但其中删去了主程序以及名字的属性与熟练度计算部分。

该项目中采用了以类的引用和参数传递为实现的面向对象编程——这对于严格而清晰地模拟任何有复杂能力判定的游戏都是最优最佳的逻辑框架。

- ### 任务

请你使用**名字竞技场**源代码中的**面向对象编程**模式，完成一个对**暴风雪山庄**规则进行模拟和操作的**导演辅助程序**，需求如下：

1. 源语言为**Dart**，无需给出到JavaScript的转译——因为这一工作和前端网页的撰写将是项目的下一步；  
项目的名称为`black_blizzard`；

2. 请完全使用**面向对象编程**，即以类和成员函数的交替引用完成对每个步骤的模拟，任何大规模同级别代码和嵌套判断句都不应存在；

3. 请尽量将代码分块，使得子文件为**少量多次**的结构，具体要求大致为：  
编写的每个程序文件不要实现超过两个类(比如**名字竞技场**共有37个子文件单独地实现每一个技能)；  
各文件大小不建议超过4kB，代码行数不超过200行；

4. 注意应当使用`part of`结构而非库引用，来进行子文件和父文件的组织；  
请使用抽象类(`abstract`保留字)而非接口(`interface`保留字)实现参数域规范；  
不建议使用`enum`导致可读性降低，但使用`typedef`简化为合适的命名是值得鼓励的；  
最后，注意使用标准的**驼峰式命名**以规范类和成员函数的名称；

5. 对不同的玩家(导演也作为其中之一)隔离出多个**输出频道**——可以考虑使用Dart中的`Stream`流范式完成这一点  
——这将有助于前端的撰写，以及不需要人工监督导演的下一步工作；

6. 为了方便逐步校验和代码调试，请实现一个**记录**功能，即创建一个外部只读的类`Log`并提供写入接口函数，在其他代码的过程函数中添加对该单例的调用，最终全部写入`log`后缀名文档；  
记录不应区分频道，但可以包含向各频道的输出；记录的语言为英文；

7. 请使用**中文**进行代码的对外交互(包括输入提示和各频道输出)，但注释、记录及其他源码内容仍必须以英文完成；

- ### 你的工作进度

由衷地感谢你的此番努力和对于这些繁多需求的配合！

**暴风雪山庄**的身世开始于另一个桌游团体的原创，他们将其发表在网络的一个[角落](https://zhuanlan.zhihu.com/p/25701506)但关注不多，直到我的桌游团体在六年之后发现了它；  
我们可能会是最后一批知道它的人，但有了你的帮助，它将重获更进一步传播和新生的可能；

不论你在编写旅程中的感受如何，现在我的调试旅程即将开始——请祝福我和这款桌游的未来一切顺利！谢谢！

如果你在本次问答中并**不能完成全部内容**，请你在到达长度限制之前结束代码文档(分为更小的`part of`)，并向我简短汇报本次工作的进度如何：比如该文件应该放置在哪条目录下，是否有额外的依赖库等等;

祝你的工作顺利前进！

<!-- 你好！请根据所提供的需求文档demand.md，参考所提供的其他资料及查询GitHub上的代码仓库，完成所定的编程任务 -->
